# Правила проекта: 3D-рендер на WebGPU

## 1. Обзор проекта

Этот проект представляет собой простой 3D-движок для рендеринга, использующий технологию WebGPU. Основная цель — создать модульную и расширяемую архитектуру для 3D-графики в вебе, **похожую на three.js**.

## 2. Технологический стек

*   **Среда выполнения:** Bun
*   **Язык:** TypeScript
*   **Математика:** gl-matrix
*   **Графический API:** WebGPU

## 3. Стиль кода и документирование

### 3.1. TypeScript
Весь новый код должен быть написан на TypeScript. Все классы, методы и переменные должны иметь строгую типизацию.

### 3.2. Документация (Комментарии)
Каждый экспортируемый класс, метод и свойство должны быть документированы с использованием синтаксиса TSDoc (`/** ... */`). Поскольку мы используем TypeScript, **не нужно** указывать типы в комментариях (например, `@{number}`), так как TypeDoc автоматически определяет их из кода. Комментарии должны объяснять *что* и *зачем*, а не повторять информацию о типах.

*   **Классы и свойства:** Пишите краткое описание над определением.
*   **Методы:** Описывайте назначение метода. Используйте `@param` для объяснения каждого параметра и `@returns` для описания возвращаемого значения.

**Пример:**
```typescript
/**
 * Камера с перспективной проекцией.
 */
export class PerspectiveCamera {
  /**
   * Угол обзора в радианах.
   */
  public fov: number

  /**
   * Обновляет матрицу проекции камеры.
   * @param aspect Новое соотношение сторон.
   */
  public updateProjectionMatrix(aspect: number): void {
    // ...
  }
}
```

### 3.3. Форматирование и стиль кода
*   **Точки с запятой:** Использование точек с запятой (`;`) в конце выражений **запрещено**.
*   **Форматирование:** Код должен быть отформатирован для единообразия. Рекомендуется использовать расширение `biomejs.biome`, которое уже установлено в рабочей области и настроено для автоматического удаления точек с запятой.


## 4. Архитектура и структура проекта

Проект имеет следующую структуру в директории `src`:

*   `core/`: Базовые классы, такие как `Mesh`.
*   `geometries/`: Классы для создания геометрии (например, `TorusGeometry`).
*   `materials/`: Материалы, определяющие внешний вид объектов (например, `BasicMaterial`).
*   `cameras/`: Камеры для управления точкой обзора (`PerspectiveCamera`).
*   `renderers/`: Классы, отвечающие за рендеринг сцены (`WebGPURenderer`).
*   `scenes/`: Класс `Scene`, который содержит все объекты для рендеринга.
*   `index.ts`: Точка входа в приложение.

## 5. Цель проекта и отношение к three.js

Этот проект — **учебная реализация 3D-движка, аналога `three.js`**. Наша цель — понять фундаментальные принципы работы 3D-графики, реализовав ключевые компоненты (сцену, камеру, рендерер, геометрию) с нуля на WebGPU.

Поэтому **не следует добавлять `three.js` в качестве зависимости**. Вместо этого, мы можем изучать архитектуру `three.js` и заимствовать из нее удачные паттерны и решения, реализуя их самостоятельно.

## 6. Моя роль

Моя задача — помогать вам в разработке, придерживаясь этих правил. Я буду:
*   Генерировать новый код, соответствующий принятому стилю.
*   Предлагать рефакторинг для улучшения кода и приведения его в соответствие с правилами.
*   Помогать с написанием документации.
*   Управлять зависимостями с помощью `bun`.
