## 1. Общие принципы

*   **Читаемость:** Код должен быть чистым, хорошо структурированным и легким для понимания.
*   **Надежность:** Включайте проверки на некорректные входные данные, чтобы предотвратить ошибки во время выполнения.
*   **Самодокументируемость:** Используйте TypeScript и TSDoc для создания самодокументируемого кода.

## 2. Язык и локализация

*   **Язык:** Весь код, комментарии и документация должны быть на **русском языке**.

## 3. Стиль и форматирование

### 3.1. Именование

*   **Переменные и функции:** `camelCase`.
*   **Классы и интерфейсы:** `PascalCase`.
*   **Файлы:** `PascalCase` для файлов, содержащих классы, в остальных случаях — `camelCase`.

### 3.2. Документация (TSDoc)

*   **Общее правило:** Любой экспортируемый класс, метод или интерфейс должен иметь TSDoc-комментарий.
*   **Классы и свойства:** Пишите краткое описание над определением.
*   **Методы:** Описывайте назначение метода. Используйте `@param` для объяснения каждого параметра и `@returns` для описания возвращаемого значения.

*   **Параметры в объектах:** При использовании объектов для передачи параметров (например, в конструкторах), документируйте каждый параметр с помощью `@default`, `@min` и `@max`, где это применимо.

    **Пример:**
    ```typescript
    /**
     * Параметры для создания геометрии тора.
     */
    interface TorusGeometryParameters {
    	/**
    	 * Радиус тора от центра до центра "трубы".
    	 * @default 0.5
    	 * @min 0
    	 */
    	radius?: number
    	/**
    	 * Количество сегментов по основной окружности тора. Целое число.
    	 * @default 12
    	 * @min 3
    	 * @max 255
    	 */
    	radialSegments?: number
    }
    ```

### 3.3. Форматирование и стиль кода

*   **Точки с запятой:** Использование точек с запятой (`;`) в конце выражений **запрещено**.
*   **Форматирование:** Код должен быть отформатирован для единообразия. Рекомендуется использовать расширение `biomejs.biome`, которое уже установлено в рабочей области и настроено для автоматического удаления точек с запятой.

### 3.4. Проектирование API

*   **Передача параметров:** Для конструкторов и функций с двумя и более параметрами, особенно если часть из них необязательные, следует использовать один объект-параметр вместо множества отдельных аргументов. Это повышает читаемость, так как имена параметров указываются явно, и упрощает добавление новых параметров в будущем без нарушения обратной совместимости.

    **Плохо:**
    ```typescript
    constructor(radius: number = 0.5, tube: number = 0.2, radialSegments: number = 12) { ... }
    new TorusGeometry(0.4, 0.2, 32);
    ```

    **Хорошо:**
    ```typescript
    constructor(parameters: TorusGeometryParameters = {}) { ... }
    new TorusGeometry({ radius: 0.4, tube: 0.2, radialSegments: 32 });
    ```

## 4. Архитектура и структура проекта

*   **Модульность:** Структура проекта вдохновлена `three.js`. Исходный код движка находится в директории `src/`, а примеры его использования — в `examples/`.
*   **Точка входа:** Главный файл `WebGPUEngine.ts` экспортирует все основные компоненты движка для удобного импорта в примерах.

## 5. Обработка ошибок

*   **Проверка входных данных:** Всегда проверяйте параметры, передаваемые в конструкторы и публичные методы. При обнаружении некорректных данных выбрасывайте исключение `Error` с понятным сообщением об ошибке на русском языке.

## 6. Разработка и деплой

*   **Платформа:** Проект развертывается на **Firebase Hosting**.
*   **Триггер:** Деплой должен производиться только по явному запросу пользователя (например, "задеплой сайт" или "опубликуй документацию").

### 6.1. Локальная разработка

*   **Сервер:** Для локальной разработки используется встроенный сервер `bun`.
*   **Команда:** `bun run dev` (или `bun --hot`). Эта команда запускает сервер, который обслуживает `index.html` и автоматически перезагружает страницу при изменениях в коде.

### 6.2. Основное приложение (Пример)

*   **Сборка:** Перед деплоем необходимо убедиться, что приложение собрано с помощью `bun run build`. Эта команда использует `index.html` как точку входа, собирает все необходимые скрипты и помещает готовый результат в папку `dist`.
*   **Папка для деплоя:** `dist`.
*   **Firebase Target:** `app`.

### 6.3. Документация

*   **Генерация:** Документация генерируется из TSDoc-комментариев с помощью `typedoc`.
*   **Команда:** `bun run build:docs`.
*   **Папка для деплоя:** `docs`.
*   **Firebase Target:** `docs`.

## 7. Управление зависимостями и скриптами

*   **Менеджер пакетов:** В проекте используется **Bun**.
*   **Установка зависимостей:** `bun install`.
*   **Запуск скриптов:** `bun run <имя_скрипта>`.
*   **Проверка типов:** `bun run typecheck`.